<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fédération de Judo - Culture & Progression</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- React & Lucide -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.292.0"
      }
    }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&family=Noto+Serif+JP:wght@700&display=swap');
        
        body { font-family: 'Outfit', sans-serif; -webkit-tap-highlight-color: transparent; background-color: #f8fafc; }
        .font-serif-jp { font-family: 'Noto Serif JP', serif; }
        
        /* Cacher la scrollbar mais garder le scroll */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Animations */
        @keyframes slideUpFade { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-entry { animation: slideUpFade 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
    </style>
</head>
<body class="text-slate-800 h-screen overflow-hidden bg-slate-50">

    <div id="root" class="h-full w-full max-w-md mx-auto bg-white shadow-2xl overflow-hidden relative">
        <div class="flex items-center justify-center min-h-screen text-slate-300 animate-pulse font-bold tracking-widest">
            CHARGEMENT...
        </div>
    </div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            User, Users, Star, BookOpen, GraduationCap, Info, MapPin, Menu, X, 
            ArrowRight, ArrowLeft, Home, Award, Globe, Heart, Zap, Book, 
            ChevronRight, Shield, Smile, DoorOpen, Layout, Volume2, Search, Sparkles
        } from 'lucide-react';

        // ==================================================================================
        // 1. DONNÉES (STRUCTURE)
        // ==================================================================================

        const levels = [
            { id: 1, title: "PALIER 1", subtitle: "Entrer dans la voie", belts: "Blanche → Jaune", color: "from-amber-300 to-orange-400", shadow: "shadow-orange-200", icon: <User size={32} /> },
            { id: 2, title: "PALIER 2", subtitle: "Comprendre", belts: "Jaune → Orange → Verte", color: "from-emerald-400 to-teal-500", shadow: "shadow-emerald-200", icon: <BookOpen size={32} /> },
            { id: 3, title: "PALIER 3", subtitle: "S’approprier", belts: "Bleue → Marron", color: "from-blue-500 to-indigo-600", shadow: "shadow-blue-200", icon: <User size={32} /> },
            { id: 4, title: "PALIER 4", subtitle: "Transmettre", belts: "Ceinture Noire", color: "from-slate-700 to-slate-900", shadow: "shadow-slate-300", icon: <Users size={32} /> },
            { id: 5, title: "PALIER 5", subtitle: "Guider", belts: "Hauts Gradés", color: "from-red-600 to-rose-700", shadow: "shadow-red-200", icon: <Star size={32} /> }
        ];

        // MENU RÉORGANISÉ EN 2 SECTIONS AVEC IMAGES DE CHAPITRES
        const menuSections = [
            {
                title: "Mon comportement sur le tapis",
                color: "text-blue-900",
                items: [
                    { id: 'A', title: 'Le Dojo', image: 'images/dojo.jpeg', color: 'text-blue-600', items: [
                        { id: 'salut', label: 'Le Salut' }, { id: 'professeur', label: 'Le Professeur' }, { id: 'partenaires', label: 'Les Partenaires' }, { id: 'judogi', label: 'Le Judogi' }, { id: 'tatami', label: 'Le Tatami' }
                    ]},
                    { id: 'D', title: 'Code Moral', image: 'images/codemoral.jpeg', color: 'text-rose-600', items: [
                        { id: 'politesse', label: 'La Politesse' }, { id: 'courage', label: 'Le Courage' }, { id: 'sincerite', label: 'La Sincérité' }, { id: 'honneur', label: "L'Honneur" }, { id: 'modestie', label: 'La Modestie' }, { id: 'respect', label: 'Le Respect' }, { id: 'controle', label: 'Le Contrôle de Soi' }, { id: 'amitie', label: "L'Amitié" }
                    ]},
                    { id: 'B', title: 'Grades', image: 'images/grades.jpeg', color: 'text-amber-600', items: [
                        { id: 'ceintures', label: 'Les Ceintures' }, { id: 'connaissance', label: 'Requis' }
                    ]}
                ]
            },
            {
                title: "Mes connaissances",
                color: "text-emerald-900",
                items: [
                    { id: 'E', title: 'Techniques', image: 'images/technique.jpeg', color: 'text-purple-600', items: [
                        { id: 'principes', label: 'Les Principes' }, { id: 'katas', label: 'Les Katas' }, { id: '100tech', label: 'Les 100 Techniques' }
                    ]},
                    { id: 'C', title: 'Culture', image: 'images/culture.jpeg', color: 'text-emerald-600', items: [
                        { id: 'fondateur', label: 'Le Fondateur' }, { id: 'france', label: 'Judo en France' }, { id: 'monde', label: 'Judo dans le Monde' }, { id: 'champions_fr', label: 'Champions Français' }, { id: 'champions_etr', label: 'Champions Étrangers' }
                    ]},
                    { id: 'F', title: 'Lexique', image: 'images/lexique.jpeg', color: 'text-slate-600', items: [
                        { id: 'lexique_general', label: 'Vocabulaire' }
                    ]}
                ]
            }
        ];

        const lexiconDatabase = {
            1: [
                { name: "Dojo", desc: "La salle où on étudie la voie (lieu de pratique)." },
                { name: "Judogi", desc: "La tenue du judoka (veste + pantalon)." },
                { name: "Obi", desc: "La ceinture." },
                { name: "Rei", desc: "Le salut." },
                { name: "Sensei", desc: "Le professeur (celui qui est né avant)." },
                { name: "Hajime", desc: "Commencez." },
                { name: "Mate", desc: "Arrêtez (pause)." },
                { name: "Soremade", desc: "Fin du combat ou de l'exercice." },
                { name: "Ippon", desc: "Victoire totale (10 points)." }
            ],
            2: [
                { name: "Tori", desc: "Celui qui fait l'action (attaque)." },
                { name: "Uke", desc: "Celui qui subit l'action (chute)." },
                { name: "Ukemi", desc: "Brise-chute (l'art de tomber sans se faire mal)." },
                { name: "Migi", desc: "Droite." },
                { name: "Hidari", desc: "Gauche." },
                { name: "Waza-ari", desc: "Gros avantage (presque la victoire)." },
                { name: "Osaekomi", desc: "Immobilisation." },
                { name: "Toketa", desc: "Sortie d'immobilisation." },
                { name: "Randori", desc: "Exercice libre (combat souple)." }
            ],
            3: [
                { name: "Kumikata", desc: "La garde (la saisie)." },
                { name: "Kuzushi", desc: "Le déséquilibre (1ère phase)." },
                { name: "Tsukuri", desc: "Le placement (2ème phase)." },
                { name: "Kake", desc: "La projection (3ème phase)." },
                { name: "Shiai", desc: "La compétition." },
                { name: "Tatami", desc: "Le tapis de judo." },
                { name: "Ayumi-ashi", desc: "Marche normale." },
                { name: "Tsugi-ashi", desc: "Marche glissée (pas chassés)." },
                { name: "Tai-sabaki", desc: "Gestion du corps (esquive/pivot)." }
            ],
            4: [
                { name: "Te-waza", desc: "Techniques de main." },
                { name: "Koshi-waza", desc: "Techniques de hanche." },
                { name: "Ashi-waza", desc: "Techniques de jambe." },
                { name: "Sutemi-waza", desc: "Techniques de sacrifice." },
                { name: "Ne-waza", desc: "Travail au sol." },
                { name: "Shime-waza", desc: "Etranglements." },
                { name: "Kansetsu-waza", desc: "Clés de bras." },
                { name: "Shido", desc: "Pénalité (faute légère)." },
                { name: "Hansoku-make", desc: "Disqualification." }
            ],
            5: [
                { name: "Seiryoku Zenyo", desc: "Le meilleur emploi de l'énergie." },
                { name: "Jita Kyoei", desc: "Entraide et prospérité mutuelle." },
                { name: "Shin-Gi-Tai", desc: "Esprit, Technique, Corps." },
                { name: "Zanshin", desc: "L'esprit de vigilance." },
                { name: "Sen-no-sen", desc: "Attaque dans l'attaque (initiative)." },
                { name: "Go-no-sen", desc: "Contre-attaque." },
                { name: "Kiai", desc: "L'union de l'énergie (le cri)." },
                { name: "Kata", desc: "Forme fondamentale." }
            ]
        };

        const getContent = (levelId, menuId, itemId) => {
            if (menuId === 'F') {
                let fullList = [];
                for (let i = 1; i <= levelId; i++) {
                    if (lexiconDatabase[i]) {
                        const wordsWithStatus = lexiconDatabase[i].map(word => ({
                            ...word,
                            isNew: i === levelId
                        }));
                        if (i === levelId) fullList = [...wordsWithStatus, ...fullList];
                        else fullList = [...fullList, ...wordsWithStatus];
                    }
                }
                fullList.sort((a, b) => (a.isNew === b.isNew) ? 0 : a.isNew ? -1 : 1);
                return {
                    title: `Lexique Palier ${levelId}`,
                    text: `Voici le vocabulaire que tu dois maîtriser à ce niveau. Les mots en surbrillance sont les nouveaux !`,
                    list: fullList 
                };
            }

            if (levelId === 1) {
                if (menuId === 'A') {
                    if (itemId === 'salut') return { 
                        title: "Le Salut (Rei)", 
                        text: "Le salut est la première chose que l'on apprend. C'est la marque de respect indispensable du judoka.",
                        list: [
                            { name: "Le Tatami", desc: "On le salue en entrant et en sortant.", image: "images/saluttatami.JPG" },
                            { name: "Le Professeur", desc: "On le salue au début et à la fin de la séance.", video: "images/salutprofesseur.MP4" },
                            { name: "Le Partenaire", desc: "On le salue avant et après chaque exercice.", image: "images/saluttatamigroupe.JPG" },
                            { name: "Les 2 formes", desc: "Debout (Ritsurei) ou à genoux (Zarei).", videos: ["images/salutdebout.mov", "images/salutgenoux.MP4"] }
                        ],
                        magicPhrase: "« Je salue avant pour dire bonjour, après pour dire merci. »",
                        senseiMessage: "Tu peux perdre un combat.\nMais tu ne dois jamais perdre le respect."
                    };
                    if (itemId === 'professeur') return { 
                        title: "Le Sensei (Professeur)", 
                        text: "Sensei est un mot magique qui veut dire « Celui qui est né avant ». C'est ton guide sur le tatami. Il est là pour te transmettre son savoir.",
                        list: [
                            { name: "Le Gardien du Savoir", desc: "Il possède les clés des techniques et son plaisir est de te les donner." },
                            { name: "Un Guide Positif", desc: "Il ne te piège jamais. S'il te corrige, c'est un cadeau pour que tu deviennes fort." },
                            { name: "Le Secret", desc: "Quand le Sensei parle, ouvre grand les yeux et les oreilles. C'est le secret des champions !" }
                        ],
                        magicPhrase: "« Regarder, c'est déjà apprendre. »",
                        senseiMessage: "Je suis là pour te montrer le chemin,\nmais c'est toi qui dois marcher."
                    };
                    if (itemId === 'partenaires') return { 
                        title: "Les Copains (Partenaires)", 
                        text: "Au judo, l'autre n'est pas un encombre. C'est un ami indispensable.",
                        list: [
                            { name: "Indispensable", desc: "Le judo ne se joue pas tout seul. Sans copain, impossible d'apprendre." },
                            { name: "La Confiance", desc: "Il te laisse le projeter. Tu es responsable de lui : aide-le à chuter sans mal." },
                            { name: "L'Entraide", desc: "Si tu deviens fort, il devient fort pour te résister. On progresse ensemble." }
                        ],
                        magicPhrase: "« Tout seul on va plus vite, ensemble on va plus loin. »",
                        senseiMessage: "Ton partenaire te prête son corps.\nC'est un cadeau précieux, prends-en soin."
                    };
                    if (itemId === 'judogi') return { 
                        title: "Ton Armure (Le Judogi)", 
                        text: "Ce n'est pas un pyjama ! C'est un vêtement solide fait pour résister aux prises.",
                        list: [
                            { name: "Le Nom", desc: "On dit Judogi (vêtement de la voie de la souplesse), pas kimono." },
                            { name: "L'Hygiène", desc: "Il doit être propre et sentir bon par respect pour les copains." },
                            { name: "Le Premier Défi", desc: "Savoir faire son nœud de ceinture tout seul est ta première victoire !" }
                        ],
                        magicPhrase: "« Je respecte mon armure, je la plie et la range soigneusement. »",
                        senseiMessage: "Un judogi propre et bien mis,\nc'est montrer que tu es prêt à bien faire."
                    };
                    if (itemId === 'tatami') return { 
                        title: "L'île Sacrée (Le Tatami)", 
                        text: "C'est notre zone de sécurité. Un tapis spécial qui amortit les chocs.",
                        list: [
                            { name: "L'Hygiène", desc: "Interdit aux chaussures ! On marche pieds nus (et propres) sur le tapis." },
                            { name: "La Sécurité", desc: "Grâce à lui, tu peux tomber mille fois sans te faire mal." },
                            { name: "Le Respect", desc: "On ne mange pas dessus, on ne court pas. On reste calme." }
                        ],
                        magicPhrase: "« Je laisse mes chaussures et mes soucis à l'entrée. »",
                        senseiMessage: "Le tatami est comme ta deuxième maison.\nAide-nous à le garder propre."
                    };
                }
                if (menuId === 'B') {
                    if (itemId === 'ceintures') return {
                        title: "Les Couleurs du Progrès",
                        text: "Chaque couleur montre que tu as grandi dans le judo.",
                        list: [
                            { name: "La Blanche", desc: "C'est la neige, la pureté. Tu es prêt à tout apprendre." },
                            { name: "Les Barrettes", desc: "Des petits pas vers la suite. Chaque barrette est une récompense." },
                            { name: "La Jaune", desc: "C'est le soleil qui se lève. Tu commences à comprendre les bases." }
                        ],
                        magicPhrase: "« La ceinture ne tient pas que le pantalon, elle tient ta volonté. »",
                        senseiMessage: "Ne sois pas pressé de changer de couleur.\nSois pressé de devenir bon."
                    };
                    if (itemId === 'connaissance') return {
                        title: "Pour devenir Jaune",
                        text: "Ce n'est pas que la force qui compte, c'est ce que tu sais faire.",
                        list: [
                            { name: "Savoir Tomber", desc: "La chute (Ukemi) est la technique la plus importante." },
                            { name: "Le Code Moral", desc: "Connaître les valeurs comme le courage et le respect." },
                            { name: "La Technique", desc: "Savoir faire tomber un copain et le tenir au sol." }
                        ],
                        magicPhrase: "« Ma tête apprend, mon corps répète. »",
                        senseiMessage: "Une ceinture se mérite à chaque entraînement."
                    };
                }
                if (menuId === 'C') {
                    if (itemId === 'fondateur') return {
                        title: "Jigoro Kano",
                        text: "C'est le père du Judo. Il vivait au Japon il y a très longtemps.",
                        list: [
                            { name: "Un Enfant Petit", desc: "Il était petit et se faisait embêter. Il voulait devenir fort.", image: "images/jigorokanopalier1.jpg" },
                            { name: "L'Invention", desc: "Il a créé le Judo en 1882 pour éduquer les jeunes." },
                            { name: "Son Idée", desc: "Utiliser la force de l'autre plutôt que de s'opposer." }
                        ],
                        magicPhrase: "« Entraide et Prospérité Mutuelle. »",
                        senseiMessage: "Grâce à lui, le monde entier fait du judo."
                    };
                    if (itemId === 'france') return {
                        title: "Le Judo en France",
                        text: "La France est un des plus grands pays de judo au monde !",
                        list: [
                            { name: "Maître Kawaishi", desc: "Un maître japonais venu en France. C'est lui qui a inventé les ceintures de couleurs !" },
                            { name: "Les Champions", desc: "Nous avons beaucoup de champions olympiques." },
                            { name: "Partout", desc: "Il y a un club de judo dans presque toutes les villes." }
                        ],
                        magicPhrase: "« Bleu, Blanc, Rouge... et Or ! »",
                        senseiMessage: "Tu fais partie d'une très grande famille."
                    };
                    if (itemId === 'monde') return {
                        title: "Le Judo dans le Monde",
                        text: "Le Judo est né au Japon, mais aujourd'hui, il est partout !",
                        list: [
                            { name: "La Naissance", desc: "Jigoro Kano a créé le Judo à Tokyo en 1882." },
                            { name: "Le Voyage", desc: "Il a beaucoup voyagé et a envoyé ses meilleurs élèves (les émissaires) dans tous les pays pour montrer son art." },
                            { name: "Partout !", desc: "Grâce à eux, on fait du judo sur les 5 continents : en Afrique, en Amérique, en Asie, en Europe et en Océanie." }
                        ],
                        magicPhrase: "« Le Judo est une grande famille mondiale. »",
                        senseiMessage: "Peu importe ton pays ou ta langue,\nsur le tatami, on parle tous Judo."
                    };
                    if (itemId === 'champions_fr') return {
                        title: "Les Champions Français",
                        text: "La France a des héros incroyables qui ont marqué l'histoire. Voici trois légendes :",
                        list: [
                            { name: "Teddy Riner : Le Roi", desc: "C'est le plus grand judoka de tous les temps ! Il mesure plus de 2 mètres. Pendant 10 ans, personne n'a réussi à le battre. Il a gagné 3 fois les Jeux Olympiques en individuel. C'est un géant !" },
                            { name: "Clarisse Agbegnenou : La Lionne", desc: "À sa naissance, elle était très fragile et les médecins étaient inquiets. Elle s'est battue pour vivre. Aujourd'hui, elle se bat sur le tapis et a tout gagné ! Elle prouve que rien n'est impossible." },
                            { name: "Jean-Luc Rougé : Le Premier", desc: "Avant lui, tout le monde pensait que seuls les Japonais pouvaient gagner. En 1975, il est devenu le tout premier Français champion du monde. Il a montré le chemin à tous les autres." }
                        ],
                        magicPhrase: "« Impossible n'est pas français ! »",
                        senseiMessage: "Ces grands champions ont tous commencé\navec une ceinture blanche, comme toi."
                    };
                    if (itemId === 'champions_etr') return {
                        title: "Uta & Hifumi : Frère et Sœur en Or",
                        text: "Uta et Hifumi Abe sont frère et sœur. Ils viennent du Japon et ont écrit une histoire incroyable.",
                        list: [
                            { name: "Le Jour Magique", desc: "Aux Jeux Olympiques de Tokyo, ils ont tous les deux gagné la médaille d'or le même jour ! C'est unique." },
                            { name: "Le Grand Frère", desc: "Ils s'entraînent dur ensemble. Quand l'un combat, l'autre tremble d'émotion pour l'encourager." },
                            { name: "La Force du Cœur", desc: "Sur le tapis comme dans la vie, ils montrent que l'amour de la famille donne des super-pouvoirs." }
                        ],
                        magicPhrase: "« On gagne ensemble, on pleure ensemble. »",
                        senseiMessage: "Le judo est un sport individuel\nqui se vit en famille."
                    };
                }
                if (menuId === 'D') {
                    const codes = {
                        politesse: { t: "La Politesse", d: "C'est le respect d'autrui.", l: [{n:"Bonjour", d:"Dire bonjour en arrivant."}, {n:"Silence", d:"Ne pas couper la parole."}, {n:"Propreté", d:"Arriver propre au dojo."}], m: "« La politesse coûte peu et achète tout. »" },
                        courage: { t: "Le Courage", d: "C'est faire ce qui est juste.", l: [{n:"Essayer", d:"Même si c'est dur."}, {n:"Oser", d:"Combattre contre plus fort que soi."}, {n:"Relever", d:"Se relever après une chute."}], m: "« J'ai peur, mais j'y vais quand même. »" },
                        sincerite: { t: "La Sincérité", d: "C'est s'exprimer sans déguiser sa pensée.", l: [{n:"Vérité", d:"Ne pas mentir au professeur."}, {n:"Vrai jeu", d:"Ne pas faire semblant de tomber."}, {n:"Honnêteté", d:"Reconnaître ses erreurs."}], m: "« Je ne triche ni avec les autres, ni avec moi-même. »" },
                        honneur: { t: "L'Honneur", d: "C'est être fidèle à la parole donnée.", l: [{n:"Promesse", d:"Faire ce qu'on a dit."}, {n:"Règles", d:"Respecter les règles du combat."}, {n:"Dignité", d:"Gagner sans se moquer, perdre sans pleurer."}], m: "« Ma parole est aussi solide que ma ceinture. »" },
                        modestie: { t: "La Modestie", d: "C'est parler de soi-même sans orgueil.", l: [{n:"Simplicité", d:"Ne pas se vanter."}, {n:"Apprendre", d:"Savoir qu'on peut toujours progresser."}, {n:"Écouter", d:"Accepter les conseils."}], m: "« Plus je suis fort, plus je suis gentil. »" },
                        respect: { t: "Le Respect", d: "Sans respect, aucune confiance ne peut naître.", l: [{n:"Les Autres", d:"Accepter tout le monde."}, {n:"Le Matériel", d:"Prendre soin du dojo."}, {n:"Soi-même", d:"Prendre soin de sa santé."}], m: "« Respecter, c'est grandir ensemble. »" },
                        controle: { t: "Le Contrôle de Soi", d: "C'est savoir se taire lorsque monte la colère.", l: [{n:"Calme", d:"Rester calme même si on perd."}, {n:"Gestes", d:"Ne jamais taper ou faire mal."}, {n:"Paroles", d:"Ne pas dire de méchancetés."}], m: "« Le plus fort est celui qui maîtrise sa colère. »" },
                        amitie: { t: "L'Amitié", d: "C'est le plus pur des sentiments humains.", l: [{n:"Entraide", d:"Aider les copains."}, {n:"Plaisir", d:"S'amuser ensemble."}, {n:"Fidélité", d:"Être là pour l'autre."}], m: "« Un ami sur le tatami est un ami pour la vie. »" }
                    };
                    const c = codes[itemId];
                    return { 
                        title: c.t, 
                        text: c.d, 
                        list: c.l.map(x => ({name: x.n, desc: x.d})),
                        magicPhrase: c.m,
                        senseiMessage: "Le code moral est ta force invisible."
                    };
                }
                if (menuId === 'E') {
                    if (itemId === 'principes') return {
                        title: "Les Principes",
                        text: "Le judo, c'est intelligent. On n'utilise pas la force brute.",
                        list: [
                            { name: "Céder", desc: "Si on te pousse, tu tires. Si on te tire, tu pousses." },
                            { name: "Déséquilibre", desc: "Avant de faire tomber, il faut mettre l'autre sur la pointe des pieds." },
                            { name: "Sécurité", desc: "Je retiens toujours mon partenaire quand il tombe." }
                        ],
                        magicPhrase: "« Le souple vainc le fort. »",
                        senseiMessage: "Utilise la force de l'autre,\npas seulement la tienne."
                    };
                    if (itemId === 'katas') return {
                        title: "Les Katas",
                        text: "C'est comme une chorégraphie ou une danse de combat.",
                        list: [
                            { name: "Te-Waza", desc: "Série des techniques de bras." },
                            { name: "Koshi-Waza", desc: "Série des techniques de hanche." },
                            { name: "Ashi-Waza", desc: "Série des techniques de jambe." }
                        ],
                        magicPhrase: "« Répéter pour atteindre la perfection. »",
                        senseiMessage: "Le Kata est la grammaire du Judo."
                    };
                    if (itemId === '100tech') return {
                        title: "Les Techniques",
                        text: "Il y a plein de façons de gagner au judo !",
                        list: [
                            { name: "Debout", desc: "Faire tomber (Tachi-Waza)." },
                            { name: "Au Sol", desc: "Immobiliser sur le dos (Osaekomi)." },
                            { name: "Magique", desc: "Chaque technique a un nom japonais." }
                        ],
                        magicPhrase: "« 100 techniques, 1000 façons de gagner. »",
                        senseiMessage: "Apprends une technique à la fois."
                    };
                }
            }

            if (levelId === 2) {
                if (menuId === 'A') {
                    if (itemId === 'salut') return {
                        title: "Le Sens du Salut",
                        text: "Le salut n'est pas une simple courbette. C'est un état d'esprit.",
                        list: [
                            { name: "Zanshin", desc: "C'est l'esprit de vigilance. Même en saluant, je reste concentré." },
                            { name: "Respect Mutuel", desc: "Je te respecte, tu me respectes. C'est la base de notre progression commune." },
                            { name: "Le Calme", desc: "Le salut permet de faire le vide et de laisser ses soucis à l'extérieur." }
                        ],
                        magicPhrase: "« Le salut commence avant le mouvement et finit après. »",
                        senseiMessage: "Un beau salut montre un beau judo."
                    };
                    if (itemId === 'professeur') return {
                        title: "Le Rôle du Sensei",
                        text: "Le professeur est un miroir technique.",
                        list: [
                            { name: "Correction", desc: "Il corrige tes défauts avant qu'ils ne deviennent des habitudes." },
                            { name: "Exemple", desc: "Il montre la voie par son attitude et sa technique." },
                            { name: "Sécurité", desc: "Il veille à ce que personne ne se blesse." }
                        ],
                        magicPhrase: "« Le Sensei montre la lune, l'élève ne doit pas regarder le doigt. »",
                        senseiMessage: "Écoute les corrections données aux autres, elles te servent aussi."
                    };
                    if (itemId === 'partenaires') return {
                        title: "Partenaire ou Adversaire ?",
                        text: "En randori, c'est un partenaire d'opposition.",
                        list: [
                            { name: "Jita Kyoei", desc: "Entraide et prospérité mutuelle. On grandit ensemble." },
                            { name: "Adaptation", desc: "Tu dois t'adapter à son poids, sa taille et sa force." },
                            { name: "Fair-play", desc: "Accepter la chute, c'est accepter d'apprendre." }
                        ],
                        magicPhrase: "« Sans Uke, pas de Tori. »",
                        senseiMessage: "Sois un bon Uke, et tu deviendras un excellent Tori."
                    };
                    if (itemId === 'judogi') return {
                        title: "Le Judogi : Ton Outil",
                        text: "Au niveau 2, le judogi n'est plus juste un uniforme, c'est ton outil principal. Tu dois connaître ses parties et savoir l'entretenir.",
                        list: [
                            { name: "Composition", desc: "Veste (Uwagi) en grain de riz pour la solidité, Pantalon (Zubon) et Ceinture (Obi)." },
                            { name: "Le Pliage", desc: "Savoir plier son judogi après le cours est un rituel de retour au calme." },
                            { name: "Respect", desc: "Un judogi sale est un manque de respect pour ton partenaire. Il doit être lavé après chaque cours." }
                        ],
                        magicPhrase: "« Un esprit sain dans un judogi propre. »",
                        senseiMessage: "Ton judogi est le miroir de ton attitude.\nPrends-en soin."
                    };
                    if (itemId === 'tatami') return { title: "Le Tatami", text: "Le lieu de la vérité. Sur le tatami, on ne peut pas mentir. Si tu n'as pas travaillé, ça se voit. C'est un espace sacré de dépassement de soi." };
                }
                if (menuId === 'B') {
                    if (itemId === 'ceintures') return {
                        title: "Vers la Ceinture Verte",
                        text: "Les couleurs intermédiaires marquent l'évolution technique.",
                        list: [
                            { name: "Orange", desc: "Tu commences à enchaîner les techniques." },
                            { name: "Verte", desc: "Tu maîtrises mieux ton corps et tes déplacements." },
                            { name: "Bleue", desc: "Tu commences à avoir tes propres spécialités." }
                        ],
                        magicPhrase: "« La couleur change, l'esprit reste. »",
                        senseiMessage: "La ceinture ne fait pas le judoka, c'est le judoka qui fait la ceinture."
                    };
                    if (itemId === 'connaissance') return {
                        title: "Le Bagage Technique",
                        text: "Il faut savoir faire plus de choses et mieux.",
                        list: [
                            { name: "Mouvements", desc: "Connaître les noms japonais des techniques." },
                            { name: "Opportunité", desc: "Savoir quand attaquer (le timing)." },
                            { name: "Combinaisons", desc: "Savoir enchaîner deux techniques différentes." }
                        ],
                        magicPhrase: "« La répétition est la mère du succès. »",
                        senseiMessage: "Ne cherche pas à être fort, cherche à être juste."
                    };
                }
                if (menuId === 'C') {
                    if (itemId === 'fondateur') return {
                        title: "Jigoro Kano : L'Intellectuel",
                        text: "Jigoro Kano n'était pas seulement un combattant, cétait un génie de l'éducation.",
                        list: [
                            { name: "La Synthèse", desc: "Il a étudié les anciennes écoles de Jujitsu des Samouraïs. Il a gardé le meilleur et enlevé les coups dangereux." },
                            { name: "L'Éducation", desc: "Pour lui, le but n'était pas la guerre, mais former des citoyens utiles à la société." },
                            { name: "Le Voyageur", desc: "Il a été le premier membre asiatique du Comité International Olympique (CIO). Il a parcouru le monde pour faire connaître le Judo." }
                        ],
                        magicPhrase: "« Rien n'est plus important que l'éducation. »",
                        senseiMessage: "Il a transformé un art de guerre en un art de vie."
                    };
                    if (itemId === 'france') return {
                        title: "Une Terre de Judo",
                        text: "La France a adopté le judo comme une seconde nature.",
                        list: [
                            { name: "Les Pionniers", desc: "Après Kawaishi, des Français comme Paul Bonét-Maury ont structuré la Fédération (FFJDA) en 1946." },
                            { name: "L'Esprit", desc: "Les Français aiment le côté tactique et l'élégance du beau judo." },
                            { name: "Le Public", desc: "Le tournoi de Paris (Bercy) est le plus grand tournoi du monde, célèbre pour son public incroyable." }
                        ],
                        magicPhrase: "« En France, le Judo est roi. »",
                        senseiMessage: "Tu es l'héritier de cette grande histoire."
                    };
                    if (itemId === 'monde') return {
                        title: "Une Famille Planétaire",
                        text: "Parti de Tokyo, le Judo est aujourd'hui pratiqué dans plus de 200 pays !",
                        list: [
                            { name: "Olympique", desc: "Le Judo est devenu olympique aux JO de Tokyo en 1964. C'était le rêve de Jigoro Kano." },
                            { name: "L'IJF", desc: "La Fédération Internationale de Judo regroupe des millions de pratiquants sur les 5 continents." },
                            { name: "Universel", desc: "Que tu sois au Brésil, en Russie ou au Japon, les règles et les valeurs sont les mêmes." }
                        ],
                        magicPhrase: "« Le Judo unit les peuples. »",
                        senseiMessage: "Ton judogi est ton passeport pour le monde."
                    };
                    if (itemId === 'champions_fr') return {
                        title: "Les champions français actuels (2020-2024)",
                        text: "La France brille au sommet de l'Olympe. Voici nos héros de Tokyo et Paris.",
                        list: [
                            { name: "Les Rois de l'Or", desc: "Teddy Riner (x2), Clarisse Agbegnenou, Équipe de France (x2 !)." },
                            { name: "L'Argent Précieux", desc: "Luka Mkheidze (x2), Joan-Benjamin Gaba, Sarah-Léonie Cysique, Amandine Buchard, Madeleine Malonga." },
                            { name: "Le Bronze Solide", desc: "Romane Dicko (x2), Shirine Boukli, Maxime-Gaël Ngayap Hambou, Axel Clerget." }
                        ],
                        magicPhrase: "« Une équipe en or massif. »",
                        senseiMessage: "Regarde leurs combats pour t'inspirer."
                    };
                    if (itemId === 'champions_etr') return {
                        title: "Légendes du Japon",
                        text: "Le Japon est le berceau du Judo. Voici les icônes qui ont marqué l'histoire par leur maîtrise technique et leur esprit.",
                        list: [
                            { name: "Ryoko Tani", desc: "Surnommée 'Yawara-chan', elle est 7 fois championne du monde et double championne olympique. Une volonté de fer." },
                            { name: "Yasuhiro Yamashita", desc: "L'invincible. 203 victoires consécutives ! Il a gagné les JO de 1984 malgré une grave blessure. Un exemple de courage." },
                            { name: "Tadahiro Nomura", desc: "Le plus grand palmarès olympique : Médaille d'Or en 1996, 2000 et 2004 ! Personne n'a jamais fait mieux à part Teddy Riner." },
                            { name: "Shohei Ono", desc: "Le style pur. Double champion olympique, il ne cherche pas seulement à gagner, mais à gagner avec la manière (Ippon)." }
                        ],
                        magicPhrase: "« Le beau judo est éternel. »",
                        senseiMessage: "Inspire-toi de leur droiture et de leur technique."
                    };
                }
                if (menuId === 'D') {
                    const codes = {
                        politesse: "C'est la première règle de vie en société.",
                        courage: "C'est surmonter sa peur pour agir.",
                        sincerite: "C'est être vrai dans ses actes et ses paroles.",
                        honneur: "C'est vivre selon ses principes.",
                        modestie: "C'est connaître ses limites et respecter les autres.",
                        respect: "C'est la base de toute relation humaine.",
                        controle: "C'est la victoire sur soi-même.",
                        amitie: "C'est partager des moments forts."
                    };
                    return { title: itemId.charAt(0).toUpperCase() + itemId.slice(1), text: codes[itemId], magicPhrase: "« Valeurs pour la vie. »", senseiMessage: "Porte ces valeurs en dehors du dojo." };
                }
                if (menuId === 'E') {
                    if (itemId === 'principes') return {
                        title: "La Mécanique du Judo",
                        text: "Pour projeter efficacement, il faut respecter 3 phases.",
                        list: [
                            { name: "Kuzushi", desc: "Le déséquilibre. C'est le plus important. Sans lui, rien ne marche." },
                            { name: "Tsukuri", desc: "Le placement. S'insérer au bon endroit." },
                            { name: "Kake", desc: "La projection. L'aboutissement du mouvement." }
                        ],
                        magicPhrase: "« Déséquilibre, Place, Projette. »",
                        senseiMessage: "Si tu forces, c'est que tu as raté ton Kuzushi."
                    };
                    if (itemId === 'katas') return {
                        title: "Nage-No-Kata",
                        text: "Les formes de projection. C'est le premier kata qu'on apprend.",
                        list: [
                            { name: "Te-Waza", desc: "Série des techniques de bras." },
                            { name: "Koshi-Waza", desc: "Série des techniques de hanche." },
                            { name: "Ashi-Waza", desc: "Série des techniques de jambe." }
                        ],
                        magicPhrase: "« La forme juste donne l'efficacité. »",
                        senseiMessage: "Le Kata t'apprend les principes fondamentaux."
                    };
                    if (itemId === '100tech') return {
                        title: "Les Familles de Techniques",
                        text: "Le judo est classé en grandes familles.",
                        list: [
                            { name: "Tachi-Waza", desc: "Toutes les techniques debout." },
                            { name: "Ne-Waza", desc: "Toutes les techniques au sol." },
                            { name: "Sutemi-Waza", desc: "Techniques de sacrifice (on se jette pour projeter)." }
                        ],
                        magicPhrase: "« Connaître, c'est pouvoir choisir. »",
                        senseiMessage: "Cherche ta technique spéciale (Tokui-Waza)."
                    };
                }
            }

            if (levelId === 3) {
                if (menuId === 'A' && itemId === 'judogi') return {
                    title: "Le Judogi en Compétition",
                    text: "À ce niveau, ton judogi doit être conforme aux normes. Il n'est plus seulement un vêtement, c'est ton équipement de performance.",
                    list: [
                        { name: "Les Normes (Sokuteiki)", desc: "Manches, pantalon, croisement : tout est mesuré au millimètre près pour l'équité en compétition." },
                        { name: "Blanc ou Bleu ?", desc: "Le blanc est la tradition (pureté). Le bleu a été introduit pour différencier les combattants à la télévision et par les arbitres." },
                        { name: "Le Nœud (Musubi)", desc: "Il doit être plat et ne jamais se défaire pendant le combat. C'est le symbole de ta détermination qui ne lâche pas." }
                    ],
                    magicPhrase: "« Un judogi conforme est la première marque de respect de l'arbitre. »",
                    senseiMessage: "Si tu dois te rhabiller toutes les 30 secondes,\ntu n'es pas concentré sur ton combat."
                };
            }

            if (levelId === 4) {
                if (menuId === 'A' && itemId === 'judogi') return {
                    title: "Histoire et Exemplarité",
                    text: "En tant que Ceinture Noire, tu représentes le Judo. Ton judogi porte une histoire technique et culturelle que tu dois transmettre.",
                    list: [
                        { name: "L'Invention (1907)", desc: "Jigoro Kano a créé cette tenue pour remplacer les armures lourdes et les kimonos fragiles. Il a inventé le tissu 'Grain de riz'." },
                        { name: "Le Sashiko", desc: "C'est la technique de tissage spécifique (fils de coton croisés) qui rend la veste presque indéchirable tout en restant souple." },
                        { name: "L'Exemplarité", desc: "Un enseignant ou une ceinture noire doit toujours être impeccable. Les élèves regardent ta tenue avant d'écouter tes paroles." }
                    ],
                    magicPhrase: "« Porter le judogi, c'est endosser l'histoire du Japon. »",
                    senseiMessage: "Ton grade se voit à ta ceinture,\nmais ta valeur se voit à ton attitude."
                };
                if (menuId === 'C' && itemId === 'fondateur') return {
                    title: "Jigoro Kano : L'Héritage",
                    text: "Au niveau Ceinture Noire, il est essentiel de comprendre que Kano n'était pas seulement un maître d'arts martiaux, mais un visionnaire de l'éducation. Il a transformé des techniques guerrières en un système d'éducation physique et morale.",
                    video: "CThBDwxOZgE",
                    list: [
                        { name: "La Genèse", desc: "Il a synthétisé les écoles de Jujitsu (Tenjin Shin'yō-ryū et Kitō-ryū) pour créer le Kodokan en 1882." },
                        { name: "L'Internationalisme", desc: "Premier membre asiatique du CIO, il a œuvré toute sa vie pour que le judo devienne un pont entre les nations." },
                        { name: "La Fin", desc: "Il décède en 1938 sur le bateau Hikawa Maru, rentrant du Caire, après avoir consacré sa vie à l'expansion du judo." }
                    ],
                    magicPhrase: "« Le but ultime du Judo est de se perfectionner pour être utile à la société. »",
                    senseiMessage: "Tu portes désormais une part de cet héritage.\nÀ toi de le transmettre."
                };
            }

            if (levelId === 5) {
                if (menuId === 'A' && itemId === 'judogi') return {
                    title: "Au-delà du Tissu",
                    text: "Avec la maîtrise, le judogi prend une dimension symbolique profonde. On revient à l'essentiel et à la simplicité.",
                    list: [
                        { name: "Kohaku Obi", desc: "La ceinture Rouge et Blanche (6e à 8e Dan). Elle symbolise l'harmonie du Yin et du Yang, et le sacrifice." },
                        { name: "Le Retour au Blanc", desc: "La ceinture Rouge (9e/10e Dan) est la plus haute, mais on dit qu'à la fin, on redevient ceinture blanche : le cycle est bouclé." },
                        { name: "Le Linceul", desc: "Traditionnellement, le blanc évoque la pureté, mais aussi le vêtement mortuaire au Japon. On s'entraîne avec le sérieux de la vie et de la mort." }
                    ],
                    magicPhrase: "« Sous la ceinture rouge, l'esprit doit redevenir blanc. »",
                    senseiMessage: "Le tissu s'use avec le temps,\nmais l'esprit se renforce."
                };
                if (menuId === 'C' && itemId === 'fondateur') return {
                    title: "Jigoro Kano : L'Héritage Spirituel",
                    text: "Au sommet de la progression, la figure de Jigoro Kano ne doit plus être vue seulement comme celle de l'inventeur technique, mais comme celle d'un philosophe humaniste. Ses derniers écrits révèlent une vision où le Judo dépasse le cadre du dojo pour devenir un principe de vie universel pour l'amélioration de l'humanité.",
                    image: "https://upload.wikimedia.org/wikipedia/commons/2/23/Kano_Jigoro_1.jpg",
                    list: [
                        { name: "Seiryoku Zenyo", desc: "Ce n'est pas l'économie d'effort, mais l'utilisation la plus efficace de l'énergie physique et mentale pour un but noble." },
                        { name: "Jita Kyoei", desc: "L'Entraide et la Prospérité Mutuelle. L'expert ne thésaurise pas le savoir, il le diffuse pour élever le niveau collectif." },
                        { name: "Le Testament", desc: "En 1938, au Caire, il avertissait déjà contre la dérive purement sportive. Le Judo doit rester une méthode d'éducation." }
                    ],
                    magicPhrase: "« Être un seul esprit avec l'univers. »",
                    senseiMessage: "Tu ne transmets plus seulement des techniques,\ntu transmets des valeurs."
                };
            }

            return {
                title: "En construction",
                text: `Le contenu "${itemId}" pour le Palier ${levelId} sera bientôt disponible.`
            };
        };

        // ==================================================================================
        // 2. APPLICATION
        // ==================================================================================

        const App = () => {
            const [selectedLevel, setSelectedLevel] = useState(null);
            const [selectedMenu, setSelectedMenu] = useState(null);
            const [selectedItem, setSelectedItem] = useState(null);
            const [isSpeaking, setIsSpeaking] = useState(false);

            const toggleSpeech = (text) => {
                if (!('speechSynthesis' in window)) return;
                window.speechSynthesis.cancel();
                if (isSpeaking) {
                    setIsSpeaking(false);
                } else {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'fr-FR'; 
                    utterance.onend = () => setIsSpeaking(false);
                    window.speechSynthesis.speak(utterance);
                    setIsSpeaking(true);
                }
            };

            const goBack = () => {
                setIsSpeaking(false);
                window.speechSynthesis.cancel();
                if (selectedItem) {
                    setSelectedItem(null);
                    if (selectedMenu && selectedMenu.id === 'F') setSelectedMenu(null);
                }
                else if (selectedMenu) setSelectedMenu(null);
                else if (selectedLevel) setSelectedLevel(null);
            };

            const isLocalVideo = (path) => {
                if (!path) return false;
                const lower = path.toLowerCase();
                return lower.endsWith('.mp4') || lower.endsWith('.webm') || lower.endsWith('.mov');
            };

            const renderVideoElement = (videoPath) => {
                if (!videoPath) return null;
                const type = videoPath.toLowerCase().endsWith('.mov') ? 'video/quicktime' : 'video/mp4';
                return (
                    <div className="mt-4 rounded-2xl overflow-hidden shadow-sm aspect-video bg-black">
                        {isLocalVideo(videoPath) ? (
                            <video controls className="w-full h-full">
                                <source src={videoPath} type={type} />
                                Votre navigateur ne supporte pas la lecture de vidéos.
                            </video>
                        ) : (
                            <iframe 
                                width="100%" height="100%" 
                                src={`https://www.youtube.com/embed/${videoPath}`} 
                                title="Video player" frameBorder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowFullScreen
                            ></iframe>
                        )}
                    </div>
                );
            };

            // VUE 1 : ACCUEIL PALIERS
            if (!selectedLevel) return (
                <div className="flex flex-col h-full bg-white animate-entry">
                    <header className="px-6 pt-10 pb-6 flex justify-between items-center bg-white sticky top-0 z-10">
                        <div>
                            <h1 className="text-3xl font-black text-slate-900 tracking-tighter">JUDO<span className="text-red-600">CULTURE</span></h1>
                            <p className="text-slate-400 text-sm font-medium uppercase tracking-widest">Guide de Progression</p>
                        </div>
                        <div className="w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center text-slate-600">
                            <Menu size={20} />
                        </div>
                    </header>
                    <main className="flex-1 overflow-y-auto px-6 pb-12 no-scrollbar">
                        <div className="space-y-6 mt-4">
                            {levels.map((level, index) => (
                                <button 
                                    key={level.id} 
                                    onClick={() => setSelectedLevel(level)}
                                    className={`w-full group relative overflow-hidden rounded-[2.5rem] p-6 text-left transition-all duration-300 active:scale-95 animate-entry`}
                                    style={{ animationDelay: `${index * 100}ms` }}
                                >
                                    <div className={`absolute inset-0 bg-gradient-to-br ${level.color} opacity-90 transition-opacity group-hover:opacity-100`}></div>
                                    <div className="relative z-10 flex justify-between items-center text-white">
                                        <div>
                                            <span className="inline-block px-3 py-1 bg-white/20 backdrop-blur-md rounded-full text-[10px] font-bold uppercase tracking-widest mb-2 border border-white/10">
                                                {level.belts}
                                            </span>
                                            <h2 className="text-3xl font-black italic uppercase leading-none mb-1">{level.title}</h2>
                                            <p className="font-medium text-white/90">{level.subtitle}</p>
                                        </div>
                                        <div className="bg-white/20 p-3 rounded-2xl backdrop-blur-sm border border-white/10">
                                            {level.icon}
                                        </div>
                                    </div>
                                </button>
                            ))}
                        </div>
                    </main>
                </div>
            );

            // VUE 2 : MENU
            if (selectedLevel && !selectedMenu) return (
                <div className="flex flex-col h-full bg-slate-50 animate-entry">
                    <div className="px-6 pt-10 pb-8 bg-white rounded-b-[3rem] shadow-sm z-10">
                        <button onClick={goBack} className="flex items-center text-slate-400 hover:text-slate-800 transition-colors mb-6 font-bold text-xs uppercase tracking-[0.2em]">
                            <ArrowLeft size={16} className="mr-2"/> Retour
                        </button>
                        <h2 className="text-4xl font-black text-slate-900 leading-none mb-2">{selectedLevel.title}</h2>
                        <p className="text-slate-500 font-medium">{selectedLevel.subtitle}</p>
                    </div>
                    <main className="flex-1 overflow-y-auto px-6 py-6 no-scrollbar space-y-8">
                        {menuSections.map((section, idx) => (
                            <div key={idx}>
                                <h3 className={`font-black text-lg mb-4 tracking-tight uppercase ${section.color}`}>{section.title}</h3>
                                <div className="grid grid-cols-2 gap-4">
                                    {section.items.map((menu, index) => (
                                        <button 
                                            key={menu.id}
                                            onClick={() => {
                                                setSelectedMenu(menu);
                                                if (menu.id === 'F') setSelectedItem({ id: 'lexique_direct' });
                                            }}
                                            className="bg-white p-5 rounded-[1.5rem] shadow-sm flex flex-col justify-between aspect-square hover:shadow-md transition-all active:scale-95 animate-entry"
                                            style={{ animationDelay: `${index * 50}ms` }}
                                        >
                                            <div className="flex flex-col h-full">
                                                <div className="flex-1 w-full rounded-xl overflow-hidden mb-3 relative shadow-sm aspect-square">
                                                    <img src={menu.image} alt={menu.title} className="w-full h-full object-cover" />
                                                </div>
                                                <div className="flex justify-between items-center">
                                                    <span className={`text-lg font-bold ${menu.color} leading-tight text-left`}>{menu.title}</span>
                                                    <span className="text-slate-200 font-black text-xl">{menu.id}</span>
                                                </div>
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </main>
                </div>
            );

            // VUE 3 : SOUS-MENU
            if (selectedMenu && !selectedItem) return (
                <div className="flex flex-col h-full bg-white animate-entry">
                    <header className="px-6 pt-10 pb-8 bg-slate-50 rounded-b-[3rem]">
                        <div className="flex justify-between items-start mb-6">
                            <button onClick={goBack} className="flex items-center text-slate-400 hover:text-slate-800 transition-colors font-bold text-xs uppercase tracking-widest">
                                <ArrowLeft size={16} className="mr-2"/> Retour
                            </button>
                            <span className="px-3 py-1 bg-white border border-slate-200 rounded-full text-[10px] font-bold text-slate-400 uppercase tracking-widest shadow-sm">
                                {selectedLevel.title}
                            </span>
                        </div>
                        <h2 className="text-3xl font-black text-slate-900 leading-tight">{selectedMenu.title}</h2>
                    </header>
                    <main className="flex-1 overflow-y-auto px-6 py-8 no-scrollbar">
                        <div className="space-y-3">
                            {selectedMenu.items.map((item, index) => (
                                <button 
                                    key={item.id}
                                    onClick={() => setSelectedItem(item)}
                                    className="w-full p-6 rounded-[2rem] bg-white border border-slate-100 flex items-center justify-between group active:bg-slate-50 transition-colors animate-entry shadow-sm"
                                    style={{ animationDelay: `${index * 50}ms` }}
                                >
                                    <span className="font-bold text-slate-700 text-lg">{item.label}</span>
                                    <div className="w-10 h-10 rounded-full bg-slate-50 text-slate-300 flex items-center justify-center group-hover:bg-red-50 group-hover:text-red-500 transition-all">
                                        <ChevronRight size={20}/>
                                    </div>
                                </button>
                            ))}
                        </div>
                    </main>
                </div>
            );

            // VUE 4 : CONTENU (RESTAURATION MÉDIAS)
            if (selectedItem) {
                const content = getContent(selectedLevel.id, selectedMenu.id, selectedItem.id);
                return (
                    <div className="flex flex-col h-full bg-white animate-entry">
                        <header className="px-6 pt-10 pb-4 flex justify-between items-center bg-white sticky top-0 z-20">
                            <button onClick={goBack} className="w-10 h-10 flex items-center justify-center rounded-full bg-slate-50 text-slate-900">
                                <ArrowLeft size={20}/>
                            </button>
                            <button onClick={() => toggleSpeech(content.text)} className={`w-10 h-10 rounded-full flex items-center justify-center transition-all ${isSpeaking ? 'bg-red-600 text-white animate-pulse' : 'bg-slate-50 text-slate-400'}`}>
                                <Volume2 size={20}/>
                            </button>
                        </header>
                        
                        <main className="flex-1 overflow-y-auto px-8 pb-16 animate-entry no-scrollbar">
                            <div className="flex items-center gap-2 mb-4">
                                <span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">{selectedLevel.title}</span>
                                <div className="w-1 h-1 bg-slate-300 rounded-full"></div>
                                <span className="text-[10px] font-bold text-red-600 uppercase tracking-widest">{selectedMenu.title}</span>
                            </div>

                            <h2 className="text-4xl font-black text-slate-900 mb-8 leading-tight">{content.title}</h2>
                            
                            <div className="space-y-8">
                                {content.text && <p className="text-xl text-slate-600 font-medium leading-relaxed">{content.text}</p>}

                                {content.list && (
                                    <ul className="space-y-4">
                                        {content.list.map((c, i) => (
                                            <li key={i} className={`p-6 rounded-[2rem] border ${c.isNew ? 'bg-amber-50 border-amber-200' : 'bg-slate-50 border-slate-50'}`}>
                                                <div className="flex items-center justify-between mb-2">
                                                    <span className={`font-black text-xl ${c.isNew ? 'text-amber-900' : 'text-slate-900'}`}>{c.name}</span>
                                                    {c.isNew && <span className="bg-amber-500 text-white text-[8px] font-black px-2 py-1 rounded-full uppercase tracking-widest">Nouveau</span>}
                                                </div>
                                                <p className={`${c.isNew ? 'text-amber-700' : 'text-slate-500'} font-medium`}>{c.desc}</p>
                                                
                                                {/* MÉDIAS DANS LA LISTE */}
                                                <div className="mt-4">
                                                    {c.video && renderVideoElement(c.video)}
                                                    {c.videos && c.videos.map((v, idx) => (
                                                        <div key={idx}>{renderVideoElement(v)}</div>
                                                    ))}
                                                    {c.image && (
                                                        <div className="mt-4 rounded-2xl overflow-hidden shadow-sm">
                                                            <img src={c.image} alt={c.name} className="w-full h-auto object-cover" />
                                                        </div>
                                                    )}
                                                </div>
                                            </li>
                                        ))}
                                    </ul>
                                )}

                                {content.magicPhrase && (
                                    <div className="relative p-8 rounded-[2.5rem] bg-slate-900 text-white overflow-hidden shadow-xl">
                                        <div className="absolute top-0 right-0 p-4 opacity-10"><Sparkles size={60} /></div>
                                        <h5 className="text-[10px] font-bold uppercase tracking-[0.3em] text-red-500 mb-4">Phrase Magique</h5>
                                        <p className="text-2xl font-serif-jp italic font-black leading-tight">"{content.magicPhrase}"</p>
                                    </div>
                                )}

                                {content.senseiMessage && (
                                    <div className="p-8 rounded-[2.5rem] bg-red-600 text-white shadow-xl flex gap-4 items-start">
                                        <div className="bg-white/20 p-2 rounded-xl mt-1"><Info size={20} /></div>
                                        <div>
                                            <h5 className="text-[10px] font-bold uppercase tracking-widest text-white/60 mb-2">Le mot du Sensei</h5>
                                            <p className="text-lg font-bold leading-tight whitespace-pre-line">"{content.senseiMessage}"</p>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </main>
                    </div>
                );
            }
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>